pipeline {
  agent any
  
   def mvnHome = tool name: 'M2_HOME', type: 'maven'
  options {
    buildDiscarder(logRotator(numToKeepStr: '5'))
  }
    
  stages {
    stage('SonarQube analysis') {
            steps {
                withSonarQubeEnv('sonarqube') {
                  sh "$(mvnHome)/bin/mvn sonar:sonar"
                }
            }
        }
  }
}
