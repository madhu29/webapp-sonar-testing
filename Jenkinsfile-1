pipeline {
  agent any
  
     options {
    buildDiscarder(logRotator(numToKeepStr: '5'))
  }
    
  stages {
    stage('SonarQube analysis') {
            steps {
                withSonarQubeEnv('sonarqube') {
                  def mvnHome = tool name: 'M2_HOME', type: 'maven'
                  sh "${mvnHome}/bin/mvn sonar:sonar"
                }
            }
        }
  }
}
