pipeline {
  agent any
  
   def mvnHome = tool 'M2_HOME' 
  options {
    buildDiscarder(logRotator(numToKeepStr: '5'))
  }
    
  stages {
    stage('SonarQube analysis') {
            steps {
                withSonarQubeEnv('sonarqube') {
                  sh '$(mvnHome)/bin/mvn sonar:sonar'
                }
            }
        }
  }
}
